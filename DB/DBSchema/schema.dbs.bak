<?xml version="1.0" encoding="UTF-8" ?>
<project name="OWGIS_Contingencia" id="Project_306c67a0" html="y" template="Default" database="PostgreSQL" >
	<schema name="public" catalogname="contingencia" schemaname="public" >
		<table name="cont_co" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" mandatory="y" />
			<index name="pk_cont_co" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_co" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_co" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_codos" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" mandatory="y" />
			<index name="pk_cont_co_15" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_codos" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_codos" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_estaciones" >
			<comment><![CDATA[These are the meteorological stations]]></comment>
			<column name="id" type="char" length="3" jt="1" mandatory="y" />
			<column name="nombre" type="text" jt="12" mandatory="y" >
				<comment><![CDATA[Nombre de la estacion]]></comment>
			</column>
			<index name="pk_cont_estaciones" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
		</table>
		<table name="cont_no" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" />
			<index name="pk_cont_co_13" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_no" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_no" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_nodos" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" />
			<index name="pk_cont_co_3" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_nodos" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_nodos" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_nox" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" />
			<index name="pk_cont_co_7" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_nox" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_nox" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_otres" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" mandatory="y" />
			<index name="pk_cont_co_1" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_otres" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_otres" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_pmdiez" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" />
			<index name="pk_cont_co_5" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_pmdiez" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_pmdiez" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_pmdoscinco" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" />
			<index name="pk_cont_co_11" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_pmveinticinco" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_pmveinticinco" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<table name="cont_sodos" >
			<column name="id" type="serial" jt="4" mandatory="y" />
			<column name="fecha" type="timestamp" jt="93" mandatory="y" />
			<column name="val" type="real" jt="7" mandatory="y" />
			<column name="id_est" type="char" length="3" jt="1" />
			<index name="pk_cont_co_9" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
			<index name="idx_cont_sodos" unique="NORMAL" >
				<column name="id_est" />
			</index>
			<fk name="fk_cont_sodos" to_schema="public" to_table="cont_estaciones" >
				<fk_column name="id_est" pk="id" />
			</fk>
		</table>
		<view name="cont_monthly_onesixsix" >
			<view_script><![CDATA[ SELECT count(*) AS count,
    maxvalues.mes,
    maxvalues.anio
   FROM ( SELECT max(cont_otres.val) AS mval,
            date_part('day'::text, cont_otres.fecha) AS dia,
            date_part('month'::text, cont_otres.fecha) AS mes,
            date_part('year'::text, cont_otres.fecha) AS anio
           FROM cont_otres
          GROUP BY date_part('day'::text, cont_otres.fecha), date_part('month'::text, cont_otres.fecha), date_part('year'::text, cont_otres.fecha)
          ORDER BY date_part('year'::text, cont_otres.fecha), date_part('month'::text, cont_otres.fecha), date_part('day'::text, cont_otres.fecha)) maxvalues
  WHERE (maxvalues.mval > (166)::double precision)
  GROUP BY maxvalues.mes, maxvalues.anio
  ORDER BY maxvalues.anio, maxvalues.mes;]]></view_script>
			<column name="count" type="bigint" />
			<column name="mes" type="float8" />
			<column name="anio" type="float8" />
		</view>
		<view name="cont_year_onesixsix" >
			<view_script><![CDATA[ SELECT count(*) AS count,
    maxvalues.anio
   FROM ( SELECT max(cont_otres.val) AS mval,
            date_part('day'::text, cont_otres.fecha) AS dia,
            date_part('month'::text, cont_otres.fecha) AS mes,
            date_part('year'::text, cont_otres.fecha) AS anio
           FROM cont_otres
          GROUP BY date_part('day'::text, cont_otres.fecha), date_part('month'::text, cont_otres.fecha), date_part('year'::text, cont_otres.fecha)
          ORDER BY date_part('year'::text, cont_otres.fecha), date_part('month'::text, cont_otres.fecha), date_part('day'::text, cont_otres.fecha)) maxvalues
  WHERE (maxvalues.mval > (166)::double precision)
  GROUP BY maxvalues.anio
  ORDER BY maxvalues.anio;]]></view_script>
			<column name="count" type="bigint" />
			<column name="anio" type="float8" />
		</view>
		<sequence name="cont_seq_co" start="1" />
		<sequence name="cont_seq_codos" start="1" />
		<sequence name="cont_seq_no" start="1" />
		<sequence name="cont_seq_nodos" start="1" />
		<sequence name="cont_seq_nox" start="1" />
		<sequence name="cont_seq_otres" start="1" />
		<sequence name="cont_seq_pmdiez" start="1" />
		<sequence name="cont_seq_pmdoscinco" start="1" />
		<sequence name="cont_seq_sodos" start="1" />
	</schema>
	<connector name="OWGIS_Contingencia" database="PostgreSQL" driver_class="org.postgresql.Driver" driver_jar="postgresql-9.4-1203.jdbc41.jar" host="132.248.8.238" port="5432" instance="contingencia" user="olmozavala" passwd="bzFxNGVsbHY=" />
	<layout id="Layout_2ca8d23f" name="Default" show_relation_columns="y" >
		<entity schema="public" name="cont_pmdoscinco" color="94c3ea" x="105" y="360" />
		<entity schema="public" name="cont_nox" color="94c3ea" x="75" y="495" />
		<entity schema="public" name="cont_otres" color="94c3ea" x="225" y="540" />
		<entity schema="public" name="cont_nodos" color="94c3ea" x="390" y="525" />
		<entity schema="public" name="cont_no" color="94c3ea" x="585" y="450" />
		<entity schema="public" name="cont_codos" color="94c3ea" x="585" y="300" />
		<entity schema="public" name="cont_monthly_onesixsix" color="94e870" x="75" y="45" />
		<entity schema="public" name="cont_year_onesixsix" color="94e870" x="285" y="60" />
		<entity schema="public" name="cont_sodos" color="94c3ea" x="240" y="225" />
		<entity schema="public" name="cont_pmdiez" color="94c3ea" x="45" y="240" />
		<entity schema="public" name="cont_estaciones" color="94c3ea" x="390" y="405" />
		<entity schema="public" name="cont_co" color="94c3ea" x="480" y="210" />
		<script name="cont_co" id="Query_2f8e1a78" language="SQL" >
			<string><![CDATA[CREATE TABLE "public".cont_co ( 
	id                   serial  NOT NULL,
	fecha                timestamp  NOT NULL,
	val                  real  NOT NULL,
	id_est               char(3)  NOT NULL,
	CONSTRAINT pk_cont_co PRIMARY KEY ( id )
 );

CREATE INDEX idx_cont_co ON "public".cont_co ( id_est );

ALTER TABLE "public".cont_co ADD CONSTRAINT fk_cont_co FOREIGN KEY ( id_est ) REFERENCES "public".cont_estaciones( id );

]]></string>
		</script>
	</layout>
	<layout id="Layout_3186a941" name="Layout_001" >
		<entity schema="public" name="cont_co" color="94c3ea" x="45" y="45" />
		<entity schema="public" name="cont_estaciones" color="94c3ea" x="210" y="60" />
	</layout>
</project>